#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Vercel
echo "üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Vercel..."

# –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è –≤–∏–≤–æ–¥—É
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

log() {
    echo -e "${GREEN}[$(date +'%Y-%m-%d %H:%M:%S')] $1${NC}"
}

error() {
    echo -e "${RED}[ERROR] $1${NC}"
}

warning() {
    echo -e "${YELLOW}[WARNING] $1${NC}"
}

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ Vercel CLI
if ! command -v vercel &> /dev/null; then
    log "üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Vercel CLI..."
    npm install -g vercel
    
    if [ $? -ne 0 ]; then
        error "–ü–æ–º–∏–ª–∫–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Vercel CLI"
        exit 1
    fi
fi

log "‚úÖ Vercel CLI –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
if ! vercel whoami &> /dev/null; then
    log "üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –≤ Vercel..."
    vercel login
    
    if [ $? -ne 0 ]; then
        error "–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –≤ Vercel"
        exit 1
    fi
fi

log "‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ –≤ Vercel"

# –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É
log "üî® –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É..."
npm run build

if [ $? -ne 0 ]; then
    error "–ü–æ–º–∏–ª–∫–∞ –∑–±—ñ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç—É"
    exit 1
fi

log "‚úÖ –ü—Ä–æ–µ–∫—Ç –∑—ñ–±—Ä–∞–Ω–æ"

# –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
log "üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Vercel..."
vercel --prod

if [ $? -ne 0 ]; then
    error "–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è"
    exit 1
fi

log "‚úÖ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"

echo ""
log "üéâ –°–∞–π—Ç —É—Å–ø—ñ—à–Ω–æ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ –Ω–∞ Vercel!"
log "üåê URL: https://freelancer-net-pl.vercel.app"
log "üìß –î–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏: info@freelancer.net.pl"
echo ""
log "üìã –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:"
echo "1. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –¥–æ–º–µ–Ω freelancer.net.pl –≤ –ø–∞–Ω–µ–ª—ñ Vercel"
echo "2. –û–Ω–æ–≤—ñ—Ç—å DNS –∑–∞–ø–∏—Å–∏ —É –≤–∞—à–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–æ–º–µ–Ω—ñ–≤"
echo "3. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è DNS (–¥–æ 24 –≥–æ–¥–∏–Ω)"
echo ""
log "üìñ –î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó: DEPLOYMENT_FREE.md" 